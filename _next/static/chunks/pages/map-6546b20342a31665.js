(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890],{2656:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/map",function(){return n(6379)}])},7590:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var a=n(4848),i=n(7789),r=n.n(i),s=n(4164),l=n(8343),o=n(7938);let c=e=>{let{content:t,className:n,variants:i,custom:c,as:u="h1"}=e,d=t.replace(/<em>/g,"<i>").replace(/<\/em>/g,"</i>").replace(/<p>/g,`<${u}>`).replace(/<\/p>/g,`</${u}>`);return(0,a.jsx)(l.P.div,{variants:i||o.QP,custom:c,className:(0,s.A)(r().title,n),dangerouslySetInnerHTML:{__html:d}})}},3468:(e,t,n)=>{"use strict";n.d(t,{F:()=>u});var a=n(4848),i=n(2428),r=n(6540),s=n(9946);let l=()=>{let e=(0,r.useRef)(null);return(0,a.jsx)(s._,{elementRef:e})};var o=n(1109),c=n.n(o);let u=(0,r.memo)(function(){return(0,a.jsx)("div",{className:c().SmokeCanvas,children:(0,a.jsx)(i.Hl,{children:(0,a.jsx)(l,{})})})})},9250:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(4848),i=n(4684),r=n(4164),s=n(2483),l=n(6540),o=n(4247),c=n(3439),u=n(121),d=n.n(u);let p=Math.min,m={before:{opacity:[1,0],y:[0,20]},after:{opacity:[0,1],y:[20,0],transition:{ease:i.lu,duration:1.6}}};function f(e){let{children:t,element:n="p",className:i,delay:u=.2,staggerDelay:p=.08,initial:f="before",splitBy:x="words",play:h,...v}=e,[y,_]=(0,o.l)(),j=(0,l.useRef)(null),P={types:"words"===x?"words,lines":"lines"},w="words"===x?".line .word":".line";return(0,l.useEffect)(()=>{if(!y.current||!j.current)return;let e=s.A.create(j.current,P),t=!0,n=new ResizeObserver(function(e,t,n){let a,i,r,s,l,o,c=0;if("function"!=typeof e)throw TypeError("Expected a function");function u(t){let n=a,r=i;return a=i=void 0,c=t,n&&(s=e.apply(r,n)),s}function d(e){let n=e-(o??0),a=e-c;return void 0===o||!!(n>=t)||!!(n<0)}function p(){let e,n,a;let i=Date.now();if(d(i))return m(i);l=setTimeout(p,(e=i-(o??0),n=i-c,a=t-e,a))}function m(e){return(l=void 0,a)?u(e):(a=i=void 0,s)}function f(...e){let n=Date.now(),r=d(n);if(a=e,i=this,o=n,r){if(void 0===l){var u;return c=u=o,l=setTimeout(p,t),s}}return void 0===l&&(l=setTimeout(p,t)),s}return t=Number(t)||0,f.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=o=i=l=void 0},f.flush=function(){return void 0===l?s:m(Date.now())},f}(()=>{if(t){t=!1;return}e.split(P)},100));return n.observe(y.current),_(y.current,{opacity:1},{duration:0}),_(w,m[f],{duration:0}),()=>{n.disconnect()}},[_,f,y,x,p]),(0,l.useEffect)(()=>{h&&_(w,m.after,{delay:(0,c.y)(p,{startDelay:u}),...m.after.transition})},[h]),(0,a.jsxs)(n,{className:(0,r.A)(d().SplitText,i,d()[f]),ref:y,...v,children:[(0,a.jsx)("span",{"data-nosnippet":!0,className:d().textContainer,ref:j,children:t}),(0,a.jsx)("span",{className:"visually-hidden",children:t})]})}},6379:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__N_SSG:()=>E,default:()=>C});var a=n(4848),i=n(4413),r=n(1426),s=n(6520),l=n(4953),o=n.n(l),c=n(6540),u=n(689),d=n.n(u),p=n(4164),m=n(2778),f=n(637),x=n(6297),h=n(7590),v=n(1897),y=n(8343),_=n(4684),j=n(9613),P=n(7377),w=n(3668),M=n(1290),N=n(9250),g=n(7938),O=n(3468);function b(e){let{pointsOfInterest:t}=e,n=(0,c.useRef)(0),i=(0,m.x)(e=>e.isOpen),r=(0,j.A)(w.$.laptop.max,!1);(0,P.A)("Escape",()=>{i&&m.x.setState({isOpen:!1})},void 0,[i]),(0,c.useEffect)(()=>{let e=m.x.subscribe(e=>{n.current=e.poiIndex,e.isOpen?M.h.setState({focusMode:!1}):M.h.setState({focusMode:!0})});return()=>e()},[]);let s={intial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0}};return(0,a.jsx)(x.N,{mode:"popLayout",children:i&&(r?(0,a.jsxs)(y.P.article,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,p.A)(d().PlaceOfInterestModal,"grid","wrapper"),children:[(0,a.jsx)(y.P.div,{variants:s,animate:"animate",initial:"intial",className:d().back,transition:{delay:.2,duration:1.2,ease:_.lu},children:(0,a.jsx)(v.U,{onClick:()=>{m.x.setState({isOpen:!1})},children:"The Map"})}),(0,a.jsxs)("div",{className:d().content,"data-lenis-prevent":!0,children:[(0,a.jsx)(g.Wo,{...t[n.current].poiIcon,alt:t[n.current].poiIcon?.alt||"",src:t[n.current].poiIcon.url,variants:s,animate:"animate",initial:"intial",transition:{delay:.2,duration:1.6,ease:_.lu}}),(0,a.jsx)(N.A,{element:"h1",play:!0,delay:.4,children:t[n.current].name}),(0,a.jsx)(y.P.div,{variants:s,animate:"animate",initial:"intial",transition:{delay:.6,duration:1.2,ease:_.lu},className:d().quote,children:(0,a.jsx)(h.M,{as:"p",content:t[n.current].quote.title})}),(0,a.jsx)(y.P.p,{variants:s,animate:"animate",initial:"intial",className:"ff-p-16",transition:{delay:.8,duration:1.2,ease:_.lu},children:t[n.current].content})]}),(0,a.jsx)(O.F,{})]},n.current):(0,a.jsxs)(y.P.article,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,p.A)(d().PlaceOfInterestModal,"grid","wrapper"),children:[(0,a.jsx)(y.P.div,{className:d().image,variants:s,animate:"animate",initial:"intial",transition:{delay:.5,duration:1.6,ease:_.lu},children:(0,a.jsx)(f.A,{...t[n.current].poiIcon,alt:t[n.current].poiIcon?.alt||"",src:t[n.current].poiIcon.url})}),(0,a.jsxs)("div",{className:d().content,children:[(0,a.jsx)(y.P.div,{variants:s,animate:"animate",initial:"intial",transition:{delay:.2,duration:1.2,ease:_.lu},children:(0,a.jsx)(v.U,{onClick:()=>{m.x.setState({isOpen:!1})},children:"The Map"})}),(0,a.jsx)(N.A,{element:"h1",play:!0,delay:.4,children:t[n.current].name}),(0,a.jsx)(y.P.div,{variants:s,animate:"animate",initial:"intial",transition:{delay:.6,duration:1.2,ease:_.lu},className:d().quote,children:(0,a.jsx)(h.M,{as:"p",content:t[n.current].quote.title})}),(0,a.jsx)(y.P.p,{variants:s,animate:"animate",initial:"intial",className:"ff-p-16",transition:{delay:.8,duration:1.2,ease:_.lu},children:t[n.current].content})]}),(0,a.jsx)(O.F,{})]},`poi-${n.current}}`))})}var S=n(3368),I=n.n(S);let T=o()(()=>Promise.all([n.e(460),n.e(791),n.e(84),n.e(110),n.e(207),n.e(382),n.e(300)]).then(n.bind(n,4300)).then(e=>e.MapPrepage),{loadableGenerated:{webpack:()=>[4300]},ssr:!1}),k=o()(()=>Promise.all([n.e(175),n.e(460),n.e(791),n.e(84),n.e(110),n.e(769),n.e(207),n.e(382),n.e(56)]).then(n.bind(n,3056)).then(e=>e.WorldMap),{loadableGenerated:{webpack:()=>[3056]},ssr:!1});var E=!0;function C(e){let{data:t}=e;return(0,M.g)({sideless:!0}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I(),{children:(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"})}),(0,a.jsx)(i.A,{currentUrl:`${s.a.MAP}`,pageTitle:t.map?.seo?.title||"The Pendragon cycle | Rise of the Merlin",pageDescription:t.map?.seo?.description,image:t.map?.seo?.image||t.map?.thumbnail}),(0,a.jsx)(r.J,{leftMenuButton:"EPISODES",rightMenuButton:"STORY",data:e.navigation}),(0,a.jsx)(T,{}),(0,a.jsx)(k,{}),(0,a.jsx)(b,{pointsOfInterest:t?.map?.pointsOfInterest})]})}},2778:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});let a=(0,n(1323).v)(e=>({isOpen:!1,poiIndex:0}))},7789:e=>{e.exports={title:"MarkdownTitle_title__Nhh3W"}},689:e=>{e.exports={PlaceOfInterestModal:"PlaceOfInterestModal_PlaceOfInterestModal__NTYFY",image:"PlaceOfInterestModal_image__3d4dB",content:"PlaceOfInterestModal_content__5wCnM",quote:"PlaceOfInterestModal_quote__lJrPq",back:"PlaceOfInterestModal_back__TPo8z"}},1109:e=>{e.exports={SmokeCanvas:"Smoke_SmokeCanvas__2YPsm"}},121:e=>{e.exports={SplitText:"SplitText_SplitText__tOyyR",textContainer:"SplitText_textContainer__nztEN"}},8852:(e,t,n)=>{"use strict";n.d(t,{o:()=>p});var a=n(4848),i=n(6540),r=n(9473);let s=(0,i.createContext)(null);var l=n(5128),o=n(104);let c=e=>!e.isLayoutDirty&&e.willUpdate(!1),u=e=>!0===e,d=e=>u(!0===e)||"id"===e,p=({children:e,id:t,inherit:n=!0})=>{let p=(0,i.useContext)(r.L),m=(0,i.useContext)(s),[f,x]=function(){let e=function(){let e=(0,i.useRef)(!1);return(0,l.E)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}(),[t,n]=(0,i.useState)(0),a=(0,i.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,i.useCallback)(()=>o.Gt.postRender(a),[a]),t]}(),h=(0,i.useRef)(null),v=p.id||m;null===h.current&&(d(n)&&v&&(t=t?v+"-"+t:v),h.current={id:t,group:u(n)&&p.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(c);return{add:a=>{e.add(a),t.set(a,a.addEventListener("willUpdate",n))},remove:a=>{e.delete(a);let i=t.get(a);i&&(i(),t.delete(a)),n()},dirty:n}}()});let y=(0,i.useMemo)(()=>({...h.current,forceRender:f}),[x]);return(0,a.jsx)(r.L.Provider,{value:y,children:e})}}},e=>{var t=t=>e(e.s=t);e.O(0,[52,573,951,153,636,593,792],()=>t(2656)),_N_E=e.O()}]);