(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{7672:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/story",function(){return n(2691)}])},5403:(e,t,n)=>{"use strict";n.d(t,{u:()=>d});var r=n(4848),a=n(9978),i=n(2111),l=n(6540),o=n(4922),u=n(9931),c=n(8823),s=n(4138);function d(e){return(0,r.jsx)(s.y,{children:(0,r.jsx)(m,{})})}function m(){let{store:e,state:t}=(0,a.F)(),n=(0,l.useRef)(null),s=(0,l.useRef)(null),d=(0,l.useRef)(null),m=(0,l.useRef)(null),v=(0,l.useRef)(null),[p,f]=(0,l.useState)(!1),h=(0,l.useMemo)(()=>({uParticlesTexture:new o.nc$(null),uVelocityTexture:new o.nc$(null)}),[]);return(0,l.useEffect)(()=>{function e(){s.current&&s.current.material.uniforms.uWorld.value.set(window.innerWidth,window.innerHeight)}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,l.useEffect)(()=>{if(!e)return;let t=function t(){if(!e)return;let{gl:r,viewport:a,camera:i}=e.getState(),l=a.getCurrentViewport(i);if(!l.width&&!l.height){setTimeout(()=>{t()},100);return}let p=Math.ceil(Math.sqrt(16)),x=new u.d(p,p,r),w=x.createTexture(),y=x.createTexture();for(let e=0;e<16;e++){let t=4*e;w.image.data[t+0]=(Math.random()-.5)*l.width,w.image.data[t+1]=(Math.random()-.5)*l.height,w.image.data[t+2]=.75*Math.PI*Math.random()+Math.PI/2,w.image.data[t+3]=Math.random(),y.image.data[t+0]=Math.random(),y.image.data[t+1]=Math.random(),y.image.data[t+2]=.5*Math.random(),y.image.data[t+3]=0}let g=x.addVariable("uParticles","precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uWorld;\nuniform float uDelta;\nuniform float uTime;\n\nfloat hash(float n){return fract(sin(n) * 43758.5453123);}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec4 particle = texture2D(uParticles, uv);\n  vec4 velocity = texture2D(uVelocity, uv);\n\n  if(particle.a <= 0.0) {\n    // Reset lifetime\n    particle.a = 1.0;\n\n    //Reset positions\n\n    // apply small 15% negative margin since particles move LTR\n    particle.x = (hash(particle.x) - 0.5) * uWorld.x - (uWorld.x  * 0.15);\n    // Make sure particles spawn with 80% of the height since they move random direction and don't spawn outside of the screen\n    float minY = 0.1 * uWorld.y;\n    float maxY = 0.9 * uWorld.y;\n    particle.y = (hash(particle.y) - 0.5) * (maxY - minY) + minY;\n\n  } else {\n    float freq = .01;\n    float amp = 2.;\n\n    float wave = sin(uTime * freq + length(particle.xy) * freq) * amp;\n    vec2 perpendicular = vec2(-sin(particle.z), cos(particle.z));\n    vec2 speed = velocity.xy;\n\n    particle.x -= cos(particle.z) * speed.x + perpendicular.x * (wave * 0.3);\n    particle.y -= sin(particle.z) * speed.y + perpendicular.y * (wave * 0.3);\n    particle.a -= uDelta * velocity.z;\n  }\n\n  gl_FragColor = particle;\n}",w),_=x.addVariable("uVelocity","precision mediump float;\n#define GLSLIFY 1\n\nfloat hash(float n){return fract(sin(n) * 43758.5453123);}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec4 particle = texture2D(uParticles, uv);\n  vec4 velocity = texture2D(uVelocity, uv);\n\n  if(particle.a <= 0.0) {\n    velocity.x = max(hash(velocity.x) * 1.3, 0.3);\n    velocity.y = max(hash(velocity.y) * 1.3, 0.3);\n\n    // Make sure life time isn't super slow by setting min to 0.2\n    velocity.z = max(hash(velocity.z) * 0.5, 0.2);\n  }\n\n  gl_FragColor = velocity;\n}",y);x.setVariableDependencies(g,[g,_]),x.setVariableDependencies(_,[_,g]),g.material.uniforms.uWorld=new o.nc$(new o.I9Y(window.innerWidth,window.innerHeight)),g.material.uniforms.uDelta=new o.nc$(0),g.material.uniforms.uTime=new o.nc$(0);let M=new Float32Array(32),P=new Float32Array(16);for(let e=0;e<p;e++)for(let t=0;t<p;t++){let n=2*(e*p+t),r=(t+.5)/p,a=(e+.5)/p;M[n+0]=r,M[n+1]=a}for(let e=0;e<16;e++)P[e+0]=(0,c.YR)(10,28)*Math.min(window.devicePixelRatio,2);let T=new o.LoY,C=new o.BKk({vertexShader:"#define GLSLIFY 1\nuniform sampler2D uParticlesTexture;\nuniform sampler2D uVelocityTexture;\n\nattribute vec2 aParticlesUv;\nattribute float aSize;\n\nvoid main() {\n  vec4 particle = texture(uParticlesTexture, aParticlesUv);\n  vec4 velocity = texture(uVelocityTexture, aParticlesUv);\n\n  vec4 mp = modelMatrix * vec4(particle.xyz, 1.0);\n  vec4 vp = viewMatrix * mp;\n\n  float sizeIn = smoothstep(1.0, 0.8, particle.a);\n  float sizeOut = smoothstep(0.0, 0.2, particle.a);\n  float s = sizeIn * sizeOut;\n\n  gl_Position = projectionMatrix * vp;\n  gl_PointSize = aSize * s;\n}",fragmentShader:"precision mediump float;\n#define GLSLIFY 1\n\nvoid main() {\n  vec2 uv = gl_PointCoord;\n  float dtc = length(uv - 0.5);\n  dtc = smoothstep(0.3, 0.0, dtc);\n  vec3 color = vec3(dtc);\n\n  gl_FragColor = vec4(color, color.r * 0.45);\n}",uniforms:h,transparent:!0,blending:o.EZo});return T.setDrawRange(0,16),T.setAttribute("aParticlesUv",new o.THS(M,2)),T.setAttribute("aSize",new o.THS(P,1)),x.init(),n.current=x,m.current=T,v.current=C,s.current=g,d.current=_,f(!0),()=>{T.dispose(),C.dispose(),w.dispose(),y.dispose(),x.dispose()}}();return()=>{t&&t()}},[]),(0,i.C)(({clock:e},t)=>{n.current&&s.current&&d.current&&(n.current.compute(),h.uParticlesTexture.value=n.current.getCurrentRenderTarget(s.current).texture,s.current.material.uniforms.uDelta.value=t,s.current.material.uniforms.uTime.value=e.getElapsedTime())}),p&&(0,r.jsxs)("points",{children:[(0,r.jsx)("primitive",{attach:"geometry",object:m.current}),(0,r.jsx)("primitive",{attach:"material",object:v.current})]})}},7590:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var r=n(4848),a=n(7789),i=n.n(a),l=n(4164),o=n(8343),u=n(7938);let c=e=>{let{content:t,className:n,variants:a,custom:c,as:s="h1"}=e,d=t.replace(/<em>/g,"<i>").replace(/<\/em>/g,"</i>").replace(/<p>/g,`<${s}>`).replace(/<\/p>/g,`</${s}>`);return(0,r.jsx)(o.P.div,{variants:a||u.QP,custom:c,className:(0,l.A)(i().title,n),dangerouslySetInnerHTML:{__html:d}})}},3019:(e,t,n)=>{"use strict";n.d(t,{S:()=>f});var r=n(4848),a=n(2428),i=n(5957),l=n.n(i),o=n(4164),u=n(4138),c=n(6540);function s(){let{children:e}=(0,u.F)();return Object.keys(e).map(t=>{let{mesh:n,props:r}=e[t];return(0,c.cloneElement)(n,{key:t,...r})})}var d=n(4922),m=n(9978),v=n(212),p=n(2487);function f(e){return(0,r.jsx)("div",{className:(0,o.A)(l().StoryOverlayCanvas),children:(0,r.jsx)(a.Hl,{camera:{position:new d.Pq0(0,0,5),fov:0},children:(0,r.jsx)(h,{})})})}function h(){let{store:e}=(0,m.F)();return(0,c.useEffect)(()=>{let{camera:t}=e.getState(),n=()=>{let e=180*(2*Math.atan(window.innerHeight/2/5))/Math.PI;t.fov=e,t.updateProjectionMatrix()};return n(),window.addEventListener("resize",n),()=>{window.addEventListener("resize",n)}}),(0,r.jsxs)(r.Fragment,{children:[p.C&&(0,r.jsx)(v.w,{}),(0,r.jsx)(s,{})]})}},2487:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});let r="development"===n(7836).env.ENVIRONMENT_NAME},7789:e=>{e.exports={title:"MarkdownTitle_title__Nhh3W"}},5957:e=>{e.exports={StoryOverlayCanvas:"StoryOverlayCanvas_StoryOverlayCanvas__EUgXC"}},8852:(e,t,n)=>{"use strict";n.d(t,{o:()=>m});var r=n(4848),a=n(6540),i=n(9473);let l=(0,a.createContext)(null);var o=n(5128),u=n(104);let c=e=>!e.isLayoutDirty&&e.willUpdate(!1),s=e=>!0===e,d=e=>s(!0===e)||"id"===e,m=({children:e,id:t,inherit:n=!0})=>{let m=(0,a.useContext)(i.L),v=(0,a.useContext)(l),[p,f]=function(){let e=function(){let e=(0,a.useRef)(!1);return(0,o.E)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}(),[t,n]=(0,a.useState)(0),r=(0,a.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,a.useCallback)(()=>u.Gt.postRender(r),[r]),t]}(),h=(0,a.useRef)(null),x=m.id||v;null===h.current&&(d(n)&&x&&(t=t?x+"-"+t:x),h.current={id:t,group:s(n)&&m.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(c);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);let a=t.get(r);a&&(a(),t.delete(r)),n()},dirty:n}}()});let w=(0,a.useMemo)(()=>({...h.current,forceRender:p}),[f]);return(0,r.jsx)(i.L.Provider,{value:w,children:e})}}},e=>{var t=t=>e(e.s=t);e.O(0,[791,84,52,110,951,153,207,636,593,792],()=>t(7672)),_N_E=e.O()}]);