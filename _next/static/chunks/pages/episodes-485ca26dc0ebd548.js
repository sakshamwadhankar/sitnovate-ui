(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{796:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/episodes",function(){return n(2349)}])},5403:(e,t,n)=>{"use strict";n.d(t,{u:()=>d});var r=n(4848),i=n(9978),a=n(2111),s=n(6540),o=n(4922),l=n(9931),u=n(8823),c=n(4138);function d(e){return(0,r.jsx)(c.y,{children:(0,r.jsx)(p,{})})}function p(){let{store:e,state:t}=(0,i.F)(),n=(0,s.useRef)(null),c=(0,s.useRef)(null),d=(0,s.useRef)(null),p=(0,s.useRef)(null),m=(0,s.useRef)(null),[v,g]=(0,s.useState)(!1),h=(0,s.useMemo)(()=>({uParticlesTexture:new o.nc$(null),uVelocityTexture:new o.nc$(null)}),[]);return(0,s.useEffect)(()=>{function e(){c.current&&c.current.material.uniforms.uWorld.value.set(window.innerWidth,window.innerHeight)}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,s.useEffect)(()=>{if(!e)return;let t=function t(){if(!e)return;let{gl:r,viewport:i,camera:a}=e.getState(),s=i.getCurrentViewport(a);if(!s.width&&!s.height){setTimeout(()=>{t()},100);return}let v=Math.ceil(Math.sqrt(16)),f=new l.d(v,v,r),x=f.createTexture(),_=f.createTexture();for(let e=0;e<16;e++){let t=4*e;x.image.data[t+0]=(Math.random()-.5)*s.width,x.image.data[t+1]=(Math.random()-.5)*s.height,x.image.data[t+2]=.75*Math.PI*Math.random()+Math.PI/2,x.image.data[t+3]=Math.random(),_.image.data[t+0]=Math.random(),_.image.data[t+1]=Math.random(),_.image.data[t+2]=.5*Math.random(),_.image.data[t+3]=0}let w=f.addVariable("uParticles","precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uWorld;\nuniform float uDelta;\nuniform float uTime;\n\nfloat hash(float n){return fract(sin(n) * 43758.5453123);}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec4 particle = texture2D(uParticles, uv);\n  vec4 velocity = texture2D(uVelocity, uv);\n\n  if(particle.a <= 0.0) {\n    // Reset lifetime\n    particle.a = 1.0;\n\n    //Reset positions\n\n    // apply small 15% negative margin since particles move LTR\n    particle.x = (hash(particle.x) - 0.5) * uWorld.x - (uWorld.x  * 0.15);\n    // Make sure particles spawn with 80% of the height since they move random direction and don't spawn outside of the screen\n    float minY = 0.1 * uWorld.y;\n    float maxY = 0.9 * uWorld.y;\n    particle.y = (hash(particle.y) - 0.5) * (maxY - minY) + minY;\n\n  } else {\n    float freq = .01;\n    float amp = 2.;\n\n    float wave = sin(uTime * freq + length(particle.xy) * freq) * amp;\n    vec2 perpendicular = vec2(-sin(particle.z), cos(particle.z));\n    vec2 speed = velocity.xy;\n\n    particle.x -= cos(particle.z) * speed.x + perpendicular.x * (wave * 0.3);\n    particle.y -= sin(particle.z) * speed.y + perpendicular.y * (wave * 0.3);\n    particle.a -= uDelta * velocity.z;\n  }\n\n  gl_FragColor = particle;\n}",x),y=f.addVariable("uVelocity","precision mediump float;\n#define GLSLIFY 1\n\nfloat hash(float n){return fract(sin(n) * 43758.5453123);}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec4 particle = texture2D(uParticles, uv);\n  vec4 velocity = texture2D(uVelocity, uv);\n\n  if(particle.a <= 0.0) {\n    velocity.x = max(hash(velocity.x) * 1.3, 0.3);\n    velocity.y = max(hash(velocity.y) * 1.3, 0.3);\n\n    // Make sure life time isn't super slow by setting min to 0.2\n    velocity.z = max(hash(velocity.z) * 0.5, 0.2);\n  }\n\n  gl_FragColor = velocity;\n}",_);f.setVariableDependencies(w,[w,y]),f.setVariableDependencies(y,[y,w]),w.material.uniforms.uWorld=new o.nc$(new o.I9Y(window.innerWidth,window.innerHeight)),w.material.uniforms.uDelta=new o.nc$(0),w.material.uniforms.uTime=new o.nc$(0);let j=new Float32Array(32),C=new Float32Array(16);for(let e=0;e<v;e++)for(let t=0;t<v;t++){let n=2*(e*v+t),r=(t+.5)/v,i=(e+.5)/v;j[n+0]=r,j[n+1]=i}for(let e=0;e<16;e++)C[e+0]=(0,u.YR)(10,28)*Math.min(window.devicePixelRatio,2);let E=new o.LoY,b=new o.BKk({vertexShader:"#define GLSLIFY 1\nuniform sampler2D uParticlesTexture;\nuniform sampler2D uVelocityTexture;\n\nattribute vec2 aParticlesUv;\nattribute float aSize;\n\nvoid main() {\n  vec4 particle = texture(uParticlesTexture, aParticlesUv);\n  vec4 velocity = texture(uVelocityTexture, aParticlesUv);\n\n  vec4 mp = modelMatrix * vec4(particle.xyz, 1.0);\n  vec4 vp = viewMatrix * mp;\n\n  float sizeIn = smoothstep(1.0, 0.8, particle.a);\n  float sizeOut = smoothstep(0.0, 0.2, particle.a);\n  float s = sizeIn * sizeOut;\n\n  gl_Position = projectionMatrix * vp;\n  gl_PointSize = aSize * s;\n}",fragmentShader:"precision mediump float;\n#define GLSLIFY 1\n\nvoid main() {\n  vec2 uv = gl_PointCoord;\n  float dtc = length(uv - 0.5);\n  dtc = smoothstep(0.3, 0.0, dtc);\n  vec3 color = vec3(dtc);\n\n  gl_FragColor = vec4(color, color.r * 0.45);\n}",uniforms:h,transparent:!0,blending:o.EZo});return E.setDrawRange(0,16),E.setAttribute("aParticlesUv",new o.THS(j,2)),E.setAttribute("aSize",new o.THS(C,1)),f.init(),n.current=f,p.current=E,m.current=b,c.current=w,d.current=y,g(!0),()=>{E.dispose(),b.dispose(),x.dispose(),_.dispose(),f.dispose()}}();return()=>{t&&t()}},[]),(0,a.C)(({clock:e},t)=>{n.current&&c.current&&d.current&&(n.current.compute(),h.uParticlesTexture.value=n.current.getCurrentRenderTarget(c.current).texture,c.current.material.uniforms.uDelta.value=t,c.current.material.uniforms.uTime.value=e.getElapsedTime())}),v&&(0,r.jsxs)("points",{children:[(0,r.jsx)("primitive",{attach:"geometry",object:p.current}),(0,r.jsx)("primitive",{attach:"material",object:m.current})]})}},3019:(e,t,n)=>{"use strict";n.d(t,{S:()=>g});var r=n(4848),i=n(2428),a=n(5957),s=n.n(a),o=n(4164),l=n(4138),u=n(6540);function c(){let{children:e}=(0,l.F)();return Object.keys(e).map(t=>{let{mesh:n,props:r}=e[t];return(0,u.cloneElement)(n,{key:t,...r})})}var d=n(4922),p=n(9978),m=n(212),v=n(2487);function g(e){return(0,r.jsx)("div",{className:(0,o.A)(s().StoryOverlayCanvas),children:(0,r.jsx)(i.Hl,{camera:{position:new d.Pq0(0,0,5),fov:0},children:(0,r.jsx)(h,{})})})}function h(){let{store:e}=(0,p.F)();return(0,u.useEffect)(()=>{let{camera:t}=e.getState(),n=()=>{let e=180*(2*Math.atan(window.innerHeight/2/5))/Math.PI;t.fov=e,t.updateProjectionMatrix()};return n(),window.addEventListener("resize",n),()=>{window.addEventListener("resize",n)}}),(0,r.jsxs)(r.Fragment,{children:[v.C&&(0,r.jsx)(m.w,{}),(0,r.jsx)(c,{})]})}},2349:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__N_SSG:()=>et,default:()=>en});var r=n(4848),i=n(4413),a=n(2428),s=n(4164),o=n(1045),l=n.n(o);let u=(0,n(1323).v)(()=>({episode:void 0,background:""}));var c=n(9978),d=n(2445),p=n(3502),m=n(6540),v=n(4922),g=n(9965);function h(e){let{backgrounds:t,defaultBg:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:l().Gradient}),(0,r.jsx)("div",{className:(0,s.A)(l().EpisodeBackground),children:(0,r.jsx)(a.Hl,{orthographic:!0,camera:{left:-.5,right:.5,top:.5,bottom:-.5},children:(0,r.jsx)(f,{defaultBg:n,backgrounds:t})})})]})}function f(e){let{backgrounds:t,defaultBg:n}=e,{store:i,state:a}=(0,c.F)(),[s,o]=(0,m.useState)(!1),l=(0,m.useRef)(null),h=(0,d.zo)("/images/noise/flower-noise.png"),f=(0,m.useRef)(0),x=(0,m.useRef)(!1),_=(0,m.useRef)({x:!1,y:!1}),w=(0,m.useRef)(null),y=(0,m.useRef)(null),j=(0,d.zo)([...t,n.defaultBackground].map(e=>(0,g.getImageProps)({src:e.url,width:e.width,height:e.height,quality:90}).props.src),()=>{o(!0)}),C=(0,m.useMemo)(()=>s?j.map(e=>({map:e,image:e.image,size:new v.I9Y,zoom:1})):[],[s]),E=(0,m.useMemo)(()=>C.length?{uCurrent:new v.nc$(C[C.length-1].map),uCurrentSize:new v.nc$(C[C.length-1].size),uNext:new v.nc$(C[C.length-1].map),uNextSize:new v.nc$(C[C.length-1].size),uProgress:new v.nc$(0),uNoise:new v.nc$(h),uZoomCurrent:new v.nc$(1),uZoomNext:new v.nc$(1)}:{},[h,C]);return(0,m.useEffect)(()=>{if(!C.length)return;let e=i?.subscribe(t);function t(e){C.forEach(e=>{let{image:t,size:n}=e,[r,i]=function(e){let t,n;let r=e.width/e.height,i=window.innerWidth/window.innerHeight;return r>i?(t=r/i,n=1):r<i?(t=1,n=i/r):(t=1,n=1),[t,n]}(t);n.set(r,i)})}return t(a),e},[C]),(0,m.useEffect)(()=>{w.current=(0,p.i)(1,1.5,{onUpdate:e=>{E.uZoomCurrent&&(E.uZoomCurrent.value=e)},duration:40,ease:"linear"});let e=u.subscribe(({episode:e,background:t})=>{function n(){if(!E.uCurrent)return;y.current?.cancel(),_.current.y=!1;let e=E.uCurrent;E.uCurrent=E.uNext,E.uNext=e,E.uProgress.value=0,l.current=null,x.current=!1}l.current&&(l.current.cancel(),n()),E.uNext&&(f.current=e,E.uNext.value=void 0!==e?C[f.current].map:C[C.length-1].map,l.current=(0,p.i)(0,1,{onUpdate:e=>{E.uProgress.value=e,e>.6&&!_.current.y&&(_.current.y=!0,y.current=(0,p.i)(1,1.5,{onUpdate:e=>{E.uZoomNext.value=e},duration:40,ease:"linear"}),w.current=(0,p.i)(1,1.5,{onUpdate:e=>{E.uZoomCurrent.value=e},duration:40,ease:"linear"}))},onComplete:n,duration:1,ease:"easeInOut"}))});return()=>{l.current&&l.current?.cancel(),w.current&&w.current?.cancel(),y.current&&y.current?.cancel(),e()}},[E,C]),(0,r.jsxs)("mesh",{children:[(0,r.jsx)("planeGeometry",{args:[1,1]}),(0,r.jsx)("shaderMaterial",{vertexShader:"#define GLSLIFY 1\nuniform vec2 uCurrentSize;\nuniform vec2 uNextSize;\nuniform float uZoomCurrent;\nuniform float uZoomNext;\n\nvarying vec2 vUv;\nvarying vec2 vCurrentUv;\nvarying vec2 vNextUv;\n\nvec2 imagePosition = vec2(0.0, 0.0);\n\nvec2 scaleUv(in vec2 uv, vec2 sizes, float zoom) {\n  return imagePosition + .5 + (uv - .5) / sizes / zoom;\n}\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUv = uv;\n\n  vCurrentUv = scaleUv(uv, uCurrentSize, uZoomCurrent);\n  vNextUv = scaleUv(uv, uNextSize, uZoomNext);\n}",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D uCurrent;\nuniform sampler2D uNext;\nuniform sampler2D uNoise;\nuniform float uProgress;\n\nvarying vec2 vUv;\nvarying vec2 vCurrentUv;\nvarying vec2 vNextUv;\n\nfloat brightnessValue = 1.0;\n\nvec4 brightness(in vec4 texture, in float brightness) {\n  return texture * brightness;\n}\n\nvec4 sampleTexture(in sampler2D sampler, in vec2 uv) {\n  vec4 t = texture2D(sampler, uv);\n  t = brightness(t, brightnessValue);\n  return t;\n}\n\nvoid main() {\n  vec4 noise = texture2D(uNoise, vUv);\n\n  vec4 t1 = sampleTexture(uCurrent, vCurrentUv);\n  vec4 t2 = sampleTexture(uNext, vNextUv);\n\n  float borderIn = smoothstep(0.0, 0.1, uProgress);\n  float border = 0.22 * borderIn;\n\n  float dissolver = 1.0 - smoothstep(uProgress, uProgress + border, noise.r);\n  vec4 final = mix(t1, t2, dissolver);\n\n  gl_FragColor = final;\n}",uniforms:E})]})}var x=n(8897),_=n(7938);let w=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"});var y=n(6297),j=n(8343),C=n(7377),E=n(8848),b=n(3187),N=n.n(b);function S(e){let{episodes:t,defaultData:n}=e,i=u(e=>e.episode),a=t[i],o=P(t[t.length-1].releaseDate).isReleased;return(0,C.A)("Escape",()=>{u.setState({episode:void 0})}),(0,r.jsx)("article",{className:(0,s.A)(N().EpisodeContent),children:(0,r.jsx)(y.N,{mode:"wait",children:(0,r.jsx)(T,{episode:i,episodeTitle:a?.title||n.title,content:a?.description||n.description,releaseDate:a?.releaseDate,signUpLink:n?.signUpLink,calendarCta:n.calendarCta,isLastEpisodeRelease:o},i?.toString()||"default")})})}function P(e){let t=new Date(e),n=new Date,r=t.getTime()<n.getTime();return{isReleased:r,date:t,content:r?"Releasing some date":"New episode released every 'x'."}}function T(e){let{episode:t,episodeTitle:n,content:i,releaseDate:a,signUpLink:o,calendarCta:l,isLastEpisodeRelease:u}=e,c=P(a);return(0,r.jsxs)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut",duration:.5},children:[(0,r.jsxs)(j.P.h1,{variants:_.AA,custom:"left",className:(0,s.A)(N().title,"ff-link-40"),children:[(0,r.jsxs)("span",{className:(0,s.A)(N().preTitle),children:["number"==typeof t?"Ep.":"The","number"==typeof t&&(0,r.jsx)("span",{className:N().episodeNumber,children:t+1})]}),n]}),(0,r.jsx)("p",{className:(0,s.A)(N().content,"ff-p-16"),children:i}),u?null:(0,r.jsxs)("div",{className:(0,s.A)(N().release),children:[(0,r.jsx)(x.Vv,{className:N().calendar}),c.isReleased?null:void 0!==t?(0,r.jsxs)("time",{children:["Releasing ",function(e){let t=new Date(e);return w.format(t)}(a)]}):(0,r.jsx)("p",{children:l})]}),(0,r.jsx)(E.N,{className:(0,s.A)(N().signUpLink),href:o,children:c.isReleased?"Watch now":"Sign Up to Watch"})]})}var M=n(637),D=n(6433),k=n.n(D),z=n(5128),L=n(104),U=n(4066);function R(e){let{episodes:t}=e,n=(0,m.useRef)(null),i=(0,m.useRef)(null);return(0,z.E)(()=>{if(!n.current||!i.current)return;let e=new U.A({wrapper:n.current,overscroll:!1}),t=t=>{e.raf(t.timestamp)};return L.Gt.update(t,!0),()=>{(0,L.WG)(t),e.destroy()}},[]),(0,r.jsx)("article",{className:(0,s.A)(k().EpisodeScroller),ref:n,children:(0,r.jsx)("ul",{className:(0,s.A)(k().scroller),ref:i,children:t.map((e,n)=>(0,r.jsx)(I,{index:n,episode:e,airDateOfPreviousEpisode:t[n-1]?.releaseDate?new Date(t[n-1].releaseDate).getTime():void 0},e.title))})})}function I(e){let{index:t,episode:n,airDateOfPreviousEpisode:i}=e,a=u(e=>e.episode),o=void 0===i&&0===t,l=void 0!==i&&i<=new Date().getTime();return(0,r.jsxs)("li",{className:(0,s.A)(k().episode,a===t&&k().active,!l&&!o&&k().blur),children:[(0,r.jsx)("button",{disabled:!l&&!o,onClick:()=>{u.getState().episode!==t&&u.setState({episode:t,background:n.background?.url||""})},className:k().button,children:(0,r.jsx)("span",{className:"visually-hidden",children:"Click to switch to epsisode"})}),(0,r.jsx)("div",{className:k().episodeImage,children:n.image?.url&&(0,r.jsx)(M.A,{src:n.image.url,width:n.image.width,height:n.image.height,alt:n.title??""})}),(0,r.jsxs)("div",{className:(0,s.A)(k().episodeContent),children:[(0,r.jsx)("h2",{className:"ff-link-20",children:n.title}),(0,r.jsx)("p",{className:"ff-p-16",children:n.synopsis})]})]})}var A=n(4953),F=n.n(A),O=n(4995),V=n.n(O);let G=F()(()=>Promise.all([n.e(711),n.e(460),n.e(207),n.e(922)]).then(n.bind(n,2922)).then(e=>e.EpisodeMobilePrePage),{loadableGenerated:{webpack:()=>[2922]},ssr:!1});function Y(e){let{defaultData:t,episodes:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G,{defaultData:t}),(0,r.jsx)(M.A,{src:n[0].background?.url,alt:n[0].title+" teaser photo",width:n[0].background?.width,height:n[0].background?.height,className:V().backgroundImage}),(0,r.jsx)("section",{className:V().episodes,children:n.map((e,t)=>{let i=`Ep. ${(t+1).toString()}`,a=n[t-1]?.releaseDate?new Date(n[t-1].releaseDate).getTime():void 0,o=void 0!==a&&a<=new Date().getTime();return(0,r.jsxs)("article",{className:(0,s.A)(V().episode,!o&&!(void 0===a&&0===t)&&V().blur),children:[(0,r.jsxs)("h1",{children:[(0,r.jsx)("span",{className:V().preTitle,children:i}),e.title]}),(0,r.jsx)(M.A,{className:V().episodeImage,src:e.image?.url,alt:e.title+" teaser photo",width:e.image?.width,height:e.image?.height}),(0,r.jsx)("p",{children:e.description})]},e.id)})})]})}var $=n(8336),B=n.n($);function W(e){let{children:t}=e;return(0,r.jsx)("article",{className:(0,s.A)(B().PageLayoutContainer,"grid"),children:(0,r.jsx)("div",{className:(0,s.A)(B().content,"grid"),children:t})})}var Z=n(1426),H=n(1290),q=n(3668),X=n(6520),J=n(9613),K=n(3019),Q=n(9946),ee=n(5403),et=!0;function en(e){let{pageData:t,episodes:n}=e,a=(0,J.A)(q.$.laptop.max,!1),s=n.allEpisodes.map(e=>e.background);return(0,H.g)({sideless:!0}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{currentUrl:`${X.a.EPISODES}`,pageTitle:t.episodeCollection?.seo?.title||"The Pendragon cycle | Rise of the Merlin",pageDescription:t.episodeCollection?.seo?.description,image:t.episodeCollection?.seo?.image?.url}),(0,r.jsx)(Z.J,{leftMenuButton:"STORY",rightMenuButton:"MAP",data:e.navigation}),(0,r.jsx)(K.S,{}),(0,r.jsx)(Q.w,{}),(0,r.jsx)(ee.u,{}),a?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Y,{episodes:n.allEpisodes,defaultData:t.episodeCollection})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{defaultBg:t.episodeCollection,backgrounds:s}),(0,r.jsx)(W,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{episodes:n.allEpisodes,defaultData:t.episodeCollection}),(0,r.jsx)(R,{episodes:n.allEpisodes})]})})]})]})}},2487:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});let r="development"===n(7836).env.ENVIRONMENT_NAME},1045:e=>{e.exports={EpisodeBackground:"EpisodeBackground_EpisodeBackground__xLmNf",Gradient:"EpisodeBackground_Gradient__BZVb4"}},3187:e=>{e.exports={EpisodeContent:"EpisodeContent_EpisodeContent__nhC3E",preTitle:"EpisodeContent_preTitle__IfdMT",episodeNumber:"EpisodeContent_episodeNumber__kORl7",title:"EpisodeContent_title__GOXK6",content:"EpisodeContent_content__vyc3R",release:"EpisodeContent_release__FuuIL",calendar:"EpisodeContent_calendar__ZSSzy",signUpLink:"EpisodeContent_signUpLink__92M8z"}},6433:e=>{e.exports={EpisodeScroller:"EpisodeScroller_EpisodeScroller__cAT2e",scroller:"EpisodeScroller_scroller__4dqig",episode:"EpisodeScroller_episode__co1Mm",active:"EpisodeScroller_active__vJP0E",episodeImage:"EpisodeScroller_episodeImage__C1Oio",blur:"EpisodeScroller_blur__N6QfD",button:"EpisodeScroller_button___2T_n",episodeContent:"EpisodeScroller_episodeContent__9LizG"}},4995:e=>{e.exports={backgroundImage:"EpisodesMobile_backgroundImage__tX2so",episodes:"EpisodesMobile_episodes__lRv6z",episodeImage:"EpisodesMobile_episodeImage__xh_B4",preTitle:"EpisodesMobile_preTitle__9v5lm",episode:"EpisodesMobile_episode__UsQoX",blur:"EpisodesMobile_blur__mUvH8"}},8336:e=>{e.exports={PageLayoutContainer:"PageLayoutContainer_PageLayoutContainer__Jjxnk",content:"PageLayoutContainer_content__BwXV5"}},5957:e=>{e.exports={StoryOverlayCanvas:"StoryOverlayCanvas_StoryOverlayCanvas__EUgXC"}},8852:(e,t,n)=>{"use strict";n.d(t,{o:()=>p});var r=n(4848),i=n(6540),a=n(9473);let s=(0,i.createContext)(null);var o=n(5128),l=n(104);let u=e=>!e.isLayoutDirty&&e.willUpdate(!1),c=e=>!0===e,d=e=>c(!0===e)||"id"===e,p=({children:e,id:t,inherit:n=!0})=>{let p=(0,i.useContext)(a.L),m=(0,i.useContext)(s),[v,g]=function(){let e=function(){let e=(0,i.useRef)(!1);return(0,o.E)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}(),[t,n]=(0,i.useState)(0),r=(0,i.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,i.useCallback)(()=>l.Gt.postRender(r),[r]),t]}(),h=(0,i.useRef)(null),f=p.id||m;null===h.current&&(d(n)&&f&&(t=t?f+"-"+t:f),h.current={id:t,group:c(n)&&p.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(u);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);let i=t.get(r);i&&(i(),t.delete(r)),n()},dirty:n}}()});let x=(0,i.useMemo)(()=>({...h.current,forceRender:v}),[g]);return(0,r.jsx)(a.L.Provider,{value:x,children:e})}}},e=>{var t=t=>e(e.s=t);e.O(0,[791,84,52,110,951,153,636,593,792],()=>t(796)),_N_E=e.O()}]);