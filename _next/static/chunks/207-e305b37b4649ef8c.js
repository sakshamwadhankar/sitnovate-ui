(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[207],{4885:(e,t,r)=>{"use strict";r.d(t,{V:()=>g});var n=r(4848),i=r(9978),o=r(2445),s=r(2111),a=r(6540),l=r(4922),u=r(3502),c=r(2691),d=r(9530),v=r(8823);function g(e){let{src:t,uniforms:r,scalePoint:g,noAlpha:m=!1,slow:f=!1,edge:h=.1}=e,[x,p]=(0,a.useState)(!1),S=(0,a.useRef)({duration:32,currentTime:0,started:!1}),_=(0,a.useRef)(!1),P=(0,a.useRef)(!1),j=(0,a.useRef)(null),{store:w,state:y}=(0,i.F)(),N=(0,d.UR)(),[b,C]=(0,o.zo)([t,`/images/noise/fbm.${N?"avif":"webp"}`],()=>{c.storyCanvasImageLoaded.setState(!0)}),I=(0,a.useMemo)(()=>({uTexture:new l.nc$(b),uNoiseMap:new l.nc$(C),uPlaneSizes:new l.nc$(new l.I9Y(0,0)),uImagePosition:new l.nc$(new l.I9Y(0,0)),uIntroProgress:new l.nc$(r.introProgress??1),uOutroProgress:new l.nc$(r.outroProgress),uResolution:new l.nc$(new l.I9Y(window.innerWidth,window.innerHeight)),uZoom:new l.nc$(0),uOpacity:new l.nc$(0),uEdge:new l.nc$(h)}),[]);return(0,a.useEffect)(()=>{let e=(0,u.i)(0,1,{duration:.8,ease:"easeOut",onUpdate:e=>{I.uOpacity.value=e}});return p(!0),()=>{e.cancel()}},[]),(0,a.useEffect)(()=>{x?(S.current.started=!0,S.current.currentTime=0,I.uImagePosition.value.setScalar(0)):(S.current.started=!1,_.current=!1)},[x]),(0,a.useEffect)(()=>{let e=w?.subscribe(t);function t(e){let{viewport:{getCurrentViewport:t},camera:r}=e;if(!j.current)return;let n=t(r);j.current.scale.set(n.width,n.height,1);let[i,o]=function(e,t){let r,n;let i=e.width/e.height,o=t.scale.x/t.scale.y;return i>o?(r=i/o,n=1):i<o?(r=1,n=o/i):(r=1,n=1),[r,n]}(b.image,j.current);I.uPlaneSizes.value.set(i,o),I.uResolution.value.set(window.innerWidth,window.innerHeight)}return t(y),e},[]),(0,s.C)((e,t)=>{if(r.introProgress&&(I.uIntroProgress.value=r.introProgress,!_.current&&r.introProgress>.8&&(_.current=!0,p(!0))),x&&1===r.outroProgress&&!P.current&&(P.current=!0,p(!1),I.uZoom.value=0),r.outroProgress<1&&P.current&&(P.current=!1),I.uOutroProgress.value=1-r.outroProgress,S.current.currentTime<=S.current.duration&&S.current.started){let{currentTime:e,duration:r}=S.current;S.current.currentTime+=t;let n=(0,v.qE)(e/r,0,1);I.uZoom.value=(0,v.Cc)(0,.4,n),g&&(I.uImagePosition.value.x=(0,v.Cc)(0,g.x,n),I.uImagePosition.value.y=(0,v.Cc)(0,g.y,n))}}),(0,n.jsxs)("mesh",{ref:j,children:[(0,n.jsx)("planeGeometry",{args:[1,1,1,1]}),(0,n.jsx)("shaderMaterial",{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUv = uv;\n}",fragmentShader:"precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nuniform sampler2D uNoiseMap;\nuniform vec2 uImagePosition;\nuniform vec2 uPlaneSizes;\nuniform vec2 uResolution;\nuniform float uIntroProgress;\nuniform float uOutroProgress;\nuniform float uZoom;\nuniform float uOpacity;\nuniform float uEdge;\n\nvarying vec2 vUv;\n\nvec2 scaleUv(in vec2 uv, float zoom) {\n  return uImagePosition + .5 + (uv - .5) / uPlaneSizes / zoom;\n}\n\nvoid main() {\n  float zoomInScale = 0.2;\n  float zoomOutScale = 0.6;\n\n  float zoom = 1.0 + zoomInScale;\n  float inZoom = zoomInScale * (1.0 - uIntroProgress);\n  float outZoom = zoomOutScale * (1.0 - uOutroProgress);\n\n  zoom -= inZoom;\n  zoom += outZoom;\n  zoom += uZoom;\n\n  // uv's\n  vec2 uv = scaleUv(vUv, zoom);\n\n  vec4 image = texture2D(uTexture, uv);\n  vec4 noise = texture2D(uNoiseMap, vUv / 2.5);\n\n  float introP = pow(uIntroProgress, 2.0);\n  float outroP = pow(uOutroProgress, 2.0);\n\n #ifdef SLOW\n  introP = uIntroProgress;\n  outroP = uOutroProgress;\n #endif\n\n  float alpha = 1.0 - smoothstep(introP * outroP, (introP + uEdge) * outroP, noise.r);\n\n  #ifdef NO_ALPHA\n  gl_FragColor = vec4(image.rgb, alpha);\n  #else\n  gl_FragColor = vec4(image.rgb, alpha * introP * outroP);\n  #endif\n\n  // Apply darkening overlay\n  vec4 darkOverlay = vec4(20.0 / 255.0, 20.0 / 255.0, 20.0 / 255.0, 0.4);\n  gl_FragColor.rgb -= darkOverlay.rgb * 0.4;\n\n  gl_FragColor *= uOpacity;\n}",uniforms:I,transparent:!0,defines:{...m?{NO_ALPHA:1}:{},...f?{SLOW:1}:{}}})]})}},7704:(e,t,r)=>{"use strict";r.d(t,{v:()=>d});var n=r(4848),i=r(637),o=r(4138),s=r(6540),a=r(2445),l=r(3502),u=r(4922),c=r(8890);function d(e){let{src:t,width:r,height:a,alt:l,className:u,visible:d=!0,priority:g}=e,m=(0,s.useRef)(null),f=(0,s.useRef)(null),h=(0,s.useContext)(c.a);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{className:u,style:{opacity:0},ref:m,src:t,width:r,height:a,alt:l||"",priority:g}),(0,n.jsx)(o.y,{visible:d,children:(0,n.jsx)(v,{syncStore:h,ref:f,imageRef:m})})]})}let v=(0,s.forwardRef)(function(e,t){let{imageRef:r,visible:i}=e,o=(0,a.zo)(r.current.src),c=(0,a.zo)("/images/noise/flower-noise.png"),d=(0,s.useRef)(null),v=(0,s.useRef)(null),g=(0,s.useRef)(!1),[m,f]=function(e){let t=(0,s.useRef)(e),r=(0,s.useRef)(new Map);return[{get current(){return t.current},set current(newState){let e=t.current;if(t.current=newState,e===t.current)return;r.current.forEach(e=>{e(newState)})}},e=>(r.current.set(e,e),function(){r.current.delete(e)})]}(!1),h=(0,s.useMemo)(()=>({uTexture:new u.nc$(o),uNoise:new u.nc$(c),uPlaneSizes:new u.nc$(new u.I9Y(1,1)),uImagePosition:new u.nc$(new u.I9Y(0,0)),uProgress:new u.nc$(0)}),[]),x=(0,s.useCallback)(e=>{if(!d.current)return;d.current.scale.set(e.width,e.height,1);let t=window.innerWidth/2,r=window.innerHeight/2;d.current.position.x=0-t+e.left+e.width/2,d.current.position.y=0+r-e.top-e.height/2},[]);return(0,s.useEffect)(()=>{if(!r.current)return;let e=new MutationObserver(()=>{x(r.current.getBoundingClientRect())});e.observe(r.current.parentElement.parentElement,{attributes:!0});let t=()=>{let e,t;if(!d.current||!r.current)return;let n=r.current.getBoundingClientRect();x(n);let i=o.image.width/o.image.height,s=n.width/n.height;i>s?(e=i/s,t=1):i<s?(e=1,t=s/i):(e=1,t=1),d.current.material.uniforms.uPlaneSizes.value.set(e,t)};return t(),window.addEventListener("resize",t),()=>{window.addEventListener("resize",t),e.disconnect()}},[]),(0,s.useEffect)(()=>(g.current?v.current=(0,l.i)(i?0:1,i?1:0,{onPlay:()=>{m.current=!0},onUpdate:e=>{d.current&&(d.current.material.uniforms.uProgress.value=e,x(r.current.getBoundingClientRect()))},onComplete:()=>{i||(m.current=!1)},delay:i?.4:0,duration:1.5,ease:"easeOut"}):g.current=!0,()=>{v.current&&v.current.cancel()}),[i]),(0,s.useEffect)(()=>{if(d.current)return d.current.visible=m.current,f(e=>{d.current&&(d.current.visible=e)})},[]),(0,n.jsxs)("mesh",{ref:d,children:[(0,n.jsx)("planeGeometry",{}),(0,n.jsx)("shaderMaterial",{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUv = uv;\n}",fragmentShader:"precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nuniform sampler2D uNoise;\nuniform vec2 uImagePosition;\nuniform vec2 uPlaneSizes;\nuniform float uProgress;\n\nvarying vec2 vUv;\n\nvec2 scaleUv(in vec2 uv) {\n  return uImagePosition + .5 + (uv - .5) / uPlaneSizes;\n}\n\nvoid main() {\n  vec2 uv = scaleUv(vUv);\n  vec4 t = texture2D(uTexture, uv);\n  vec4 noise = texture2D(uNoise, uv);\n\n  float dissolve = 1.0 - smoothstep(uProgress, uProgress + 0.1, noise.r);\n\n  gl_FragColor = t * dissolve;\n}",uniforms:h,transparent:!0})]})})},2691:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSG:()=>er,default:()=>ei,storyCanvasImageLoaded:()=>en});var n=r(4848),i=r(4413),o=r(2428),s=r(9765),a=r.n(s),l=r(4164),u=r(4885),c=r(4978),d=r(2445),v=r(3502),g=r(6540),m=r(9946),f=r(9530);function h(e){let{backgrounds:t}=e,r=(0,f.UR)(),i=(0,g.useRef)(null),o=(0,g.useRef)(null),s=(0,g.useRef)(null),a=t.map(e=>(r?e.avif:e.webp)||""),l=(0,g.useMemo)(()=>Array.from({length:7},(e,r)=>{let n=a[r],i=n.length;return{index:r,background:n,scalePoint:t[r].scalePoint,uniforms:i?{introProgress:0===r?1:0,outroProgress:0}:void 0}}),[a,t]);return(0,g.useEffect)(()=>c.jS.subscribe((e,t)=>{let r=l[t],n=l[e],s=e<t?-1:1;i.current&&i.current.stop(),o.current&&o.current.stop(),1===s&&(n?.uniforms&&(n.uniforms.outroProgress=0),n?.uniforms&&r?.background&&(n.uniforms.introProgress=1)),-1===s&&n?.uniforms&&(n.uniforms.outroProgress=0),1===s&&(i.current=(0,v.i)(0,1,{onPlay:()=>{c.wj.setState(!1)},onComplete:()=>{c.wj.setState(!0)},onUpdate:e=>{r?.uniforms&&(r.uniforms.outroProgress=e),n?.uniforms&&!r?.background&&(n.uniforms.introProgress=e)},ease:"easeOut",duration:2})),-1===s&&(i.current=(0,v.i)(0,1,{onUpdate:e=>{r?.uniforms&&!r?.background&&(r.uniforms.outroProgress=e),n?.background&&n?.uniforms&&(n.uniforms.introProgress=e)},ease:"easeOut",duration:1.7,onPlay:()=>{r?.background||c.wj.setState(!1)},onComplete:()=>{r?.background||c.wj.setState(!0)}}),r?.background&&(o.current=(0,v.i)(0,1,{onUpdate:e=>{r?.uniforms&&(r.uniforms.outroProgress=e)},delay:.7,duration:2,onPlay:()=>{c.wj.setState(!1)},onComplete:()=>{c.wj.setState(!0)}})))}),[l]),(0,n.jsxs)(n.Fragment,{children:[l.toReversed().map(e=>{let t=void 0!==e.uniforms;return 0===e.index&&d.zo.preload(e.background),t&&(0,n.jsx)(u.V,{src:e.background,uniforms:e.uniforms,scalePoint:e.scalePoint},`${e.background}-${e.index}`)}),(0,n.jsx)(m._,{elementRef:s})]})}var x=r(4922);function p(e){let{story:t}=e,r=[{webp:t.foldMedia?.webpUrl,avif:t.foldMedia?.avifUrl,scalePoint:new x.I9Y(0,.1)},{webp:t.introBackground?.webpUrl,avif:t.introBackground?.avifUrl},{},{},{},{webp:t.fourthBackground?.webpUrl,avif:t.fourthBackground?.avifUrl,scalePoint:new x.I9Y(0,.1)},{webp:t.outroBackground?.webpUrl,avif:t.outroBackground?.avifUrl}];return(0,n.jsx)("div",{className:(0,l.A)(a().StoryCanvas,"background-dark"),children:(0,n.jsx)(o.Hl,{gl:{antialias:!0},children:(0,n.jsx)(h,{backgrounds:r})})})}var S=r(4684),_=r(8343),P=r(3361),j=r(637),w=r(7938),y=r(1701),N=r.n(y);function b(e){let{backgroundImage:t}=e;return(0,n.jsxs)(n.Fragment,{children:[t?.src||t?.url?(0,n.jsx)(j.A,{className:N()["background-image"],...t,alt:t?.alt||"",src:t?.src||t?.url,blurUpThumb:t?.blurUpThumb}):null,(0,n.jsxs)(_.P.div,{variants:{hidden:{opacity:0,scale:.8,y:10,filter:"blur(4px)"},visible:{opacity:1,scale:1,y:0,filter:"blur(0px)",transition:{duration:2.6,delay:2.4,ease:S.lu,staggerChildren:.2,delayChildren:.15}},exit:{opacity:0,scale:1.2,y:-10,filter:"blur(4px)",transition:{duration:2.6,ease:S.lu,staggerChildren:.2}}},className:N()["middle-section"],children:[(0,n.jsx)(j.A,{src:"/images/logo/logo-gold.png",width:1032,height:224,alt:"The Pendragon Cycle Logo",priority:!0}),(0,n.jsxs)(_.P.div,{variants:w.QP,className:N()["arrow-section"],children:[(0,n.jsx)(_.P.div,{className:N()["motion-arrow"],initial:{rotate:-90,y:-10},animate:{rotate:-90,y:10},transition:{duration:1.2,ease:S.e2,repeat:1/0,repeatType:"mirror",repeatDelay:1},children:(0,n.jsx)(P.i,{})}),(0,n.jsx)("span",{className:"ff-link-24",children:"Scroll for More"})]})]})]})}var C=r(3201),I=r.n(C),A=r(7590);function M(e){let{text:t,title:r,lightColor:i=!1}=e;return(0,n.jsx)("article",{className:(0,l.A)(I().StoryIntro,i?I().light:""),children:(0,n.jsxs)("div",{children:[r?(0,n.jsx)(A.M,{variants:w.AA,"data-stagger":0,content:r,className:I().title}):null,(0,n.jsx)(_.P.p,{variants:w.AA,"data-stagger":.1,className:I().text,children:t})]})})}var T=r(1426),z=r(8897),R=r(5695),O=r.n(R),U=r(6520),k=r(3668),E=r(9613),B=r(1897);function D(e){let{text:t}=e,r=(0,E.A)(k.$.laptop.max,!1);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:O().StoryNavigationSection,children:[(0,n.jsx)("h2",{className:(0,l.A)(O().title,"ff-italic"),children:"Explore more"}),(0,n.jsxs)("div",{className:(0,l.A)(O().navigationContainer),children:[(0,n.jsx)(_.P.div,{className:O().arrowButtonContainer,variants:w.QP,children:(0,n.jsxs)(B.U,{className:O().arrowButton,href:U.a.MAP,children:["The ",U.c[U.a.MAP]]})}),(0,n.jsxs)("div",{className:(0,l.A)(O().discoveries),children:[(0,n.jsxs)(w.Br,{variants:w.QP,className:O().navigationButton,href:U.a.CLANS,children:[(0,n.jsx)(z.h8,{width:r?68:85,height:r?68:85}),(0,n.jsx)("span",{children:"Discover the Characters"})]}),(0,n.jsxs)(w.Br,{variants:w.QP,className:(0,l.A)(O().navigationButton,O().right),href:U.a.LINEAGES,children:[(0,n.jsx)(z.m8,{width:r?82:107,height:r?45:60}),(0,n.jsx)("span",{children:"Discover the Family Tree"})]})]}),(0,n.jsx)(_.P.div,{className:O().arrowButtonContainer,variants:w.QP,children:(0,n.jsxs)(B.U,{className:O().arrowButton,right:!0,href:U.a.EPISODES,children:["The ",U.c[U.a.EPISODES]]})})]})]})})}var F=r(5769),L=r(2321),$=r.n(L),W=r(7704);function Y(e){let{media:t,title:r,text:i,index:o}=e,s=(0,c.jS)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.P.div,{variants:w.QP,className:$()["left-section"],children:(0,n.jsx)(W.v,{visible:o===s,src:t.url,...t})}),(0,n.jsx)(A.M,{variants:w.AA,content:r.title,className:(0,l.A)($().title)}),(0,n.jsx)(_.P.p,{variants:w.AA,className:(0,l.A)("ff-p-16",$().text),children:i})]})}var q=r(2929),Z=r.n(q);function Q(e){let{media:t,title:r,text:i,index:o}=e,s=(0,c.jS)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.P.div,{variants:w.QP,className:Z()["left-section"],children:(0,n.jsx)(W.v,{visible:o===s,src:t.url,...t})}),(0,n.jsxs)("div",{className:Z()["right-section"],children:[(0,n.jsx)(A.M,{variants:w.e2,custom:"right",content:r.title,className:Z().title}),(0,n.jsx)(_.P.div,{variants:w.e2,custom:"right",className:Z()["horizontal-rule"]}),(0,n.jsx)(_.P.p,{variants:w.e2,custom:"right",className:"ff-p-16",children:i})]})]})}var H=r(425),G=r.n(H);function V(e){let{media:t,title:r,text:i,quote:o,index:s}=e,a=(0,c.jS)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:G()["left-section"],children:[(0,n.jsx)(A.M,{variants:w.e2,custom:"left",content:r.title,className:G().title}),(0,n.jsx)(_.P.p,{variants:w.e2,custom:"left",className:"ff-p-16",children:i}),(0,n.jsx)(_.P.div,{variants:w.e2,custom:"left",className:G()["horizontal-rule"]}),(0,n.jsx)(A.M,{variants:w.e2,custom:"left",content:o.title,className:G().quote})]}),(0,n.jsx)("div",{className:G()["vertical-rule"]}),(0,n.jsx)(_.P.div,{variants:w.QP,className:G()["right-section"],children:(0,n.jsx)(W.v,{visible:s===a,src:t.url,...t})})]})}var J=r(5403),K=r(1290),X=r(1323),ee=r(984),et=r(3019),er=!0;let en=(0,X.v)(()=>!1);function ei(e){let{data:t}=e,r=t.story;return(0,K.g)({sideless:!0}),(0,g.useEffect)(()=>{requestAnimationFrame(()=>{ee.o.setState({showHoverState:!1})})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{currentUrl:`${U.a.STORY}`,pageTitle:r?.seo?.title,pageDescription:r?.seo?.description,image:r?.seo?.image?.url}),(0,n.jsx)(p,{story:r}),(0,n.jsx)(et.S,{}),(0,n.jsx)(J.u,{}),(0,n.jsx)(T.J,{leftMenuButton:"MAP",rightMenuButton:"EPISODES",data:e.navigation}),(0,n.jsxs)(c.OB,{children:[(0,n.jsx)(F.q,{showRowsOnMobile:!0,index:0,children:(0,n.jsx)(b,{})}),(0,n.jsx)(F.q,{index:1,children:(0,n.jsx)(M,{text:r.introText,title:r.introTitle.title})}),(0,n.jsx)(F.q,{index:2,children:(0,n.jsx)(Q,{index:2,media:r.firstMedia,text:r.firstText,title:r.firstTitle})}),(0,n.jsx)(F.q,{index:3,children:(0,n.jsx)(V,{index:3,media:r.secondMedia,text:r.secondText,title:r.secondTitle,quote:r.secondQuote})}),(0,n.jsx)(F.q,{index:4,children:(0,n.jsx)(Y,{index:4,media:r.thirdMedia,text:r.thirdText,title:r.thirdTitle})}),(0,n.jsx)(F.q,{index:5,children:(0,n.jsx)(M,{text:r.fourthText})}),(0,n.jsx)(F.q,{showRowsOnMobile:!0,index:6,children:(0,n.jsx)(D,{text:r.outroText})})]})]})}},9765:e=>{e.exports={StoryCanvas:"StoryCanvas_StoryCanvas__RSZXL"}},1701:e=>{e.exports={"middle-section":"StoryFold_middle-section__nscMD","arrow-section":"StoryFold_arrow-section__IRZla","motion-arrow":"StoryFold_motion-arrow__I0ka4","navigation-button":"StoryFold_navigation-button__E1JvH",right:"StoryFold_right__8MiRN"}},3201:e=>{e.exports={StoryIntro:"StoryIntro_StoryIntro__Nb95A",light:"StoryIntro_light__KrD_B",text:"StoryIntro_text__dApqr",title:"StoryIntro_title__Mg1xi"}},5695:e=>{e.exports={"horizontal-rule":"StoryNavigationSection_horizontal-rule__SPSA5",StoryNavigationSection:"StoryNavigationSection_StoryNavigationSection__Sg_gh",title:"StoryNavigationSection_title__DNaoa",navigationContainer:"StoryNavigationSection_navigationContainer__Ednn6",discoveries:"StoryNavigationSection_discoveries__7i_yR",navigationButton:"StoryNavigationSection_navigationButton____hkF",arrowButtonContainer:"StoryNavigationSection_arrowButtonContainer__P_c_b",arrowButton:"StoryNavigationSection_arrowButton__87HQf",text:"StoryNavigationSection_text__RutjM","navigation-section":"StoryNavigationSection_navigation-section__HSMER","navigation-button":"StoryNavigationSection_navigation-button__poPSW"}},2321:e=>{e.exports={"left-section":"StorySplitContentImageAndText_left-section__1lpjA",title:"StorySplitContentImageAndText_title__wCr82",text:"StorySplitContentImageAndText_text__6nFPv","right-section":"StorySplitContentImageAndText_right-section__bZIpp","horizontal-rule":"StorySplitContentImageAndText_horizontal-rule__mpvWt"}},2929:e=>{e.exports={"left-section":"StorySplitContentOverlappingTitle_left-section__YaLm0","right-section":"StorySplitContentOverlappingTitle_right-section__NzCpC","horizontal-rule":"StorySplitContentOverlappingTitle_horizontal-rule__3K4hi",title:"StorySplitContentOverlappingTitle_title__u18rQ"}},425:e=>{e.exports={"left-section":"StorySplitWithCentralDivider_left-section__S4Ybs","right-section":"StorySplitWithCentralDivider_right-section__e8tpD","horizontal-rule":"StorySplitWithCentralDivider_horizontal-rule__Wf6YW","vertical-rule":"StorySplitWithCentralDivider_vertical-rule__pDAZo",title:"StorySplitWithCentralDivider_title__hu7J4",quote:"StorySplitWithCentralDivider_quote__8DMC2"}}}]);